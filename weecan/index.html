

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Weecan Login</title>
<style>
body {
font-family: "Segoe UI", sans-serif;
background: linear-gradient(135deg, #c9e4ff, #e6f0fa);
height: 100vh;
margin: 0;
display: flex;
justify-content: center;
align-items: center;
}
.login-box {
background: #fff;
padding: 30px 40px;
border-radius: 15px;
box-shadow: 0 5px 20px rgba(0,0,0,0.1);
width: 320px;
text-align: center;
}
.logo {
  width: 100px;
  margin-bottom: 8px;  /* åŸæœ¬ 15pxï¼Œç¼©å°ä¸€ç‚¹ */
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.login-box h2 {
  margin-top: 5px;     /* æ–°å¢ï¼Œé¿å…é»˜è®¤ 20px çš„å¤§é—´è· */
  margin-bottom: 20px;
  color: #1a3d66;
}

button {
width: 100%;
padding: 12px;
background: #7cc6ff;
border: none;
color: #fff;
font-size: 16px;
border-radius: 10px;
cursor: pointer;
margin-top: 12px;
}
button:hover {
background: #2980b9;
}
.error {
color: red;
margin-top: 10px;
font-size: 14px;
}
</style>
</head>
<body>
<div class="login-box">
<!-- Logo å›¾ç‰‡ -->
<img src="images/logo.png" alt="" class="logo">


<h2>Weecan Login</h2>
<input type="text" id="username" placeholder="ç”¨æˆ·å">
<input type="password" id="password" placeholder="å¯†ç ">
<button onclick="login()">ç™»å½•</button>
<p id="errorMsg" class="error"></p>
</div>

<script>
const API_URL = "https://weecan-airtable-api.vercel.app/api/login";

async function login() {
const user = document.getElementById("username").value.trim();
const pass = document.getElementById("password").value.trim();
const errorMsg = document.getElementById("errorMsg");

console.log("ğŸ” Debug: å³å°†å‘é€ç™»å½•è¯·æ±‚", { user, passHidden: pass ? "***" : "(ç©º)" });
errorMsg.textContent = "";

try {
const res = await fetch(API_URL, {
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify({ user, pass })
});

console.log("ğŸ“¡ Debug: æ”¶åˆ°å“åº”çŠ¶æ€", res.status);

let data;
try {
data = await res.json();
} catch (e) {
console.error("âŒ Debug: JSON è§£æå¤±è´¥", e);
errorMsg.textContent = "è¿”å›ä¸æ˜¯æœ‰æ•ˆçš„ JSON";
return;
}

console.log("ğŸ“¦ Debug: å“åº”å†…å®¹", data);

if (data.success) {
console.log("âœ… Debug: ç™»å½•æˆåŠŸ");
sessionStorage.setItem("loggedIn", "true");
alert("ç™»å½•æˆåŠŸ");
window.location.href = "main.html";
} else {
console.warn("âš ï¸ Debug: ç™»å½•å¤±è´¥ï¼ŒAPI è¿”å›é”™è¯¯");
errorMsg.textContent = "âŒ ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯";
}
} catch (err) {
console.error("ğŸš¨ Debug: è¯·æ±‚å¤±è´¥", err);
errorMsg.textContent = "ğŸš¨ ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åå†è¯•";
}
}
</script>

</body>
</html>

